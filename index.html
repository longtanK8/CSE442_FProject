<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <script src="jquery.js"></script>
    <link rel="icon" type="image/png" sizes="16x16" href="images/icon.png">
    <link rel="stylesheet" type="text/css"
        href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?fbclid=IwAR20YljHUaRpmC_9YKoZPNr78eVvvkPLsulPJ-dX3uByDXrE9mL3Yhp65h8">
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="styles.css">

    <title>Final Project</title>
</head>

<body>
    <header>
        <div class="header-content">
            <p>put some words here as a menu bar</p>
            <div class="main-menu">
                <div class="room-type">
                    <li>
                        <a href="#">Book Room<span class="menu-span" onclick="openMenu()"><img src="images/next.png" alt="down"></span></a>
                        <ul class="sub-menu">
                            <a href="#single">Single Bed</a>
                        </ul>
                        <ul class="sub-menu">
                            <a href="#double">Double Bed</a>
                        </ul>
                        <ul class="sub-menu">
                            <a href="#quad">Quad Bed</a>
                        </ul>
                        <ul class="sub-menu">
                            <a href="#queen">Queen Room</a>
                        </ul>
                    </li>
                </div>

            </div>
        </div>
    </header>
    <main>
        <section class="main-content">
            <div class="img-expand">
                <div id="blackDeep" onclick="this.parentElement.style.display='none', clearTimeout(timeOut)"></div>
                <span onclick="this.parentElement.style.display='none', clearTimeout(timeOut)"
                    class="closebtn">&times;</span>
                <div class="arrows" id="previous" onclick="onPrevious()" style="display: none;">
                    <img src="images/next.png" alt="back" style="transform: scaleX(-1);">
                </div>
                <div class="arrows" id="next" onclick="onNext()" style="display: none;">
                    <img src="images/next.png" alt="next">
                </div>
                <img id="expandedImg" style="width:100%">
                <div id="imgtext"></div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-md-5">
                        <div class="img-part">
                            <!-- This is where to insert room images -->
                            <div id="main-pic" style="display: none;">
                                <img src="images/double-bed-2.jpg" alt="double bed" id="db1">
                                <img src="images/double-bed-3.jpg" alt="double bed" id="db2">
                                <img src="images/double-bed.jpg" alt="double bed" id="db3">

                            </div>
                            <img class="room-img" src="images/double-bed.jpg" alt="double bed"
                                onclick="imgExpand(this)">
                            <span class="tooltiptext">Click to open gallery</span>
                        </div>
                    </div>
                    <div class="col-md-7">
                        <div class="room-title">
                            <h3 class="room-title-header">Double Bed</h3>
                        </div>
                        <div class="room-description">
                            <p>Beatiful rooms with two beds or twin beds, the rooms can be assigned for a couple or 2
                                adults and a chilld</p>
                            <p><b>Rooms include: </b>1 twin bed or 2 beds, a toilet with full equipments, a TV, a small
                                set of sofas</p>
                            <p><b>Special: </b>A golf with river view.</p>
                            <p class="price">500.000 vnd/day</p>
                        </div>
                        <div class="room-descript">

                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="book-part">
                        <button type="button" class="btn btn-primary" onclick="bookForward()">Book This Room</button>
                    </div>
                </div>
            </div>
        </section>
    </main>
    <footer>
        <div class="footer-content">
            <p>put some words here as a footer part</p>
        </div>
    </footer>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <!-- <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
</body>

<script>
    function imgExpand(imgs) {
        resetTimeout();
        var expandImg = document.getElementById("expandedImg");
        var imgText = document.getElementById("imgtext");
        expandImg.src = imgs.src;
        imgText.innerHTML = imgs.alt;
        expandImg.parentElement.style.display = "block";
        let black = document.getElementById("blackDeep");
        black.style.display = "block";
        document.querySelectorAll(".arrows").forEach(a => a.style.display = "block");

    }

    function bookForward() {
        window.location.href = "https://google.com/search?q=book+form"
    }

    let currentID = 1;
    picNum = document.getElementById('main-pic').childElementCount;
    function onNext() {
        let changePic = document.getElementById('expandedImg');
        let current = document.getElementById("db" + currentID);
        if (current == null) {
            let btn = document.getElementById('next');
            btn.style.opacity = 0.8;
            currentID = 1;
            current = document.getElementById("db" + currentID);
            changePic.src = current.src;
            currentID++;
            resetTimeout()
            // $('#next').hover(function(){
            //     $(this).css("cursor","not-allowed");
            // });
        }
        else {
            changePic.src = current.src
            currentID++;
            resetTimeout()
        }

    }

    function onPrevious() {
        let changePic = document.getElementById('expandedImg');
        let current = document.getElementById("db" + currentID);
        if (current == null) {
            let btn = document.getElementById('previous');
            btn.style.opacity = 0.8;
            currentID = picNum;
            current = document.getElementById("db" + currentID);
            changePic.src = current.src;
            currentID--;
            resetTimeout()
            // $('#previous').hover(function(){
            //     $(this).css("cursor","not-allowed");
            // });
        }
        else {
            changePic.src = current.src
            currentID--;
            resetTimeout()
        }

    }
    let timeOut = setTimeout(onNext, 3000);
    function resetTimeout() {
        if (timeOut) {
            clearTimeout(timeOut);
            timeOut = setTimeout(onNext, 3000);
        }
        else {
            timeOut = setTimeout(onNext, 3000);
        }
    }

    
    function openMenu() {
        let menu = document.getElementsByClassName('menu-span')[0];
        let arrow = menu.childNodes[0];
        let st = window.getComputedStyle(arrow, null);
        let cssValue = st.getPropertyValue('transform');
        console.log(cssValue);

        var values = cssValue.split('(')[1],
            values = values.split(')')[0],
            values = values.split(',');

        var a = values[0]; // 0.866025
        var b = values[1]; // 0.5
        var c = values[2]; // -0.5
        var d = values[3]; // 0.866025

        var angle = Math.round(Math.asin(b) * (180/Math.PI));
        console.log(angle);

        if(angle==90){
            arrow.style.transform = 'rotate(0deg)';
            document.querySelectorAll(".sub-menu").forEach(a => a.style.display = "none");
        }else if(angle==0){
            arrow.style.transform = 'rotate(90deg)';
            document.querySelectorAll(".sub-menu").forEach(a => a.style.display = "block");
        }


    }

</script>

</html>